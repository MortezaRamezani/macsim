<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MacSim: trace_read_c Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<h1>trace_read_c Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="trace_read_c" -->
<p>Trace reader class.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="trace__read_8h_source.html">trace_read.h</a>&gt;</code></p>

<p><a href="classtrace__read__c-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#af1e97f217786742f927a8cfb19e75b4e">trace_read_c</a> (<a class="el" href="classmacsim__c.html">macsim_c</a> *simBase)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a6e68015f7b152374329a8228215213e6">~trace_read_c</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a262fb0303f53144c30c267dc3e454c6c">get_uops_from_traces</a> (int core_id, <a class="el" href="classuop__c.html">uop_c</a> *uop, int sim_thread_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a4552577d58bbc847977cdba517a58c10">pre_read_trace</a> (<a class="el" href="structthread__s.html">thread_s</a> *trace_info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#ad4b1b2fec74a627bb1d39d40d3a68b80">setup_trace</a> (int core_id, int sim_thread_id)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10174761af18a3353195cd71f66aa6f5"></a><!-- doxytag: member="trace_read_c::g_tr_reg_names" ref="a10174761af18a3353195cd71f66aa6f5" args="[MAX_TR_REG]" -->
static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>g_tr_reg_names</b> [MAX_TR_REG]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af27cab2059c89a18a7e0a22f52d74779"></a><!-- doxytag: member="trace_read_c::g_tr_opcode_names" ref="af27cab2059c89a18a7e0a22f52d74779" args="[MAX_TR_OPCODE_NAME]" -->
static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>g_tr_opcode_names</b> [MAX_TR_OPCODE_NAME]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>g_tr_cf_names</b> [10]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>g_optype_names</b> [37]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>g_mem_type_names</b> [20]</td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a3a85825f5248721194c5b94535146459">init_pin_convert</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinst__info__s.html">inst_info_s</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#ae9df5fd9d3fcad53f061f93bfb6c5c7d">convert_pinuop_to_t_uop</a> (<a class="el" href="structtrace__info__s.html">trace_info_s</a> *pi, <a class="el" href="structtrace__uop__s.html">trace_uop_s</a> **trace_uop, int core_id, int sim_thread_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a32c8483c87d146d86ac4f9dc3074e03b">convert_t_uop_to_info</a> (<a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *t_uop, <a class="el" href="classinst__info__s.html">inst_info_s</a> *info)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#ae63f967e03e75fe66268da01b731ac43">convert_info_uop</a> (<a class="el" href="classinst__info__s.html">inst_info_s</a> *info, <a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *trace_uop)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#af639d4cd3a4fb4970fccdc48d577ea58">convert_dyn_uop</a> (<a class="el" href="classinst__info__s.html">inst_info_s</a> *info, <a class="el" href="structtrace__info__s.html">trace_info_s</a> *pi, <a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *trace_uop, Addr rep_offset, int core_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a4c8ae23acf255d1fa06b6da7cd67f4ae">dprint_inst</a> (<a class="el" href="structtrace__info__s.html">trace_info_s</a> *t_info, int core_id, int thread_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a03c129b83858f7687afb067160fc2f38">read_trace</a> (int core_id, <a class="el" href="structtrace__info__s.html">trace_info_s</a> *trace_info, int sim_thread_id, bool *inst_read)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a15c95901d6feaf0a968aad03858eef4c">ungetch_trace</a> (int core_id, int sim_thread_id, int num_inst)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a8f641d8f18e9c7a2be45e500f6f5cec8">peek_trace</a> (int core_id, <a class="el" href="structtrace__info__s.html">trace_info_s</a> *trace_info, int sim_thread_id, bool *inst_read)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a7ca8b07aa548cbeac42c78fa5dcdc856">m_int_uop_table</a> [TR_OPCODE_LAST]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a71e9a814021a699d19a3b61fdc53d9f4">m_fp_uop_table</a> [TR_OPCODE_LAST]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a447f055cd46c4894c8b6c67debaa70a4"></a><!-- doxytag: member="trace_read_c::dprint_count" ref="a447f055cd46c4894c8b6c67debaa70a4" args="" -->
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>dprint_count</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f95dd5961dceaf284795a7d5618cc82"></a><!-- doxytag: member="trace_read_c::dprint_output" ref="a8f95dd5961dceaf284795a7d5618cc82" args="" -->
ofstream *&nbsp;</td><td class="memItemRight" valign="bottom"><b>dprint_output</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmacsim__c.html">macsim_c</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a5056a52a94eb0fc5a3ab6e6ccb1d113b">m_simBase</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrace__read__c.html#a8853b7e1571b86ffba1ee31b185d0e91">k_trace_buffer_size</a> = 1000</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Trace reader class. </p>
<p>This class handles all trace related operations. Read instructions from the file, decode, split to micro ops, uop setups ... </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af1e97f217786742f927a8cfb19e75b4e"></a><!-- doxytag: member="trace_read_c::trace_read_c" ref="af1e97f217786742f927a8cfb19e75b4e" args="(macsim_c *simBase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">trace_read_c::trace_read_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmacsim__c.html">macsim_c</a> *&nbsp;</td>
          <td class="paramname"> <em>simBase</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor </p>

</div>
</div>
<a class="anchor" id="a6e68015f7b152374329a8228215213e6"></a><!-- doxytag: member="trace_read_c::~trace_read_c" ref="a6e68015f7b152374329a8228215213e6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">trace_read_c::~trace_read_c </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destructor </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af639d4cd3a4fb4970fccdc48d577ea58"></a><!-- doxytag: member="trace_read_c::convert_dyn_uop" ref="af639d4cd3a4fb4970fccdc48d577ea58" args="(inst_info_s *info, trace_info_s *pi, trace_uop_s *trace_uop, Addr rep_offset, int core_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::convert_dyn_uop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinst__info__s.html">inst_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__info__s.html">trace_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *&nbsp;</td>
          <td class="paramname"> <em>trace_uop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Addr&nbsp;</td>
          <td class="paramname"> <em>rep_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>From statis instruction, add dynamic information such as load address, branch target, ... </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>- instruction information from the hash table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pi</em>&nbsp;</td><td>- raw trace information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_uop</em>&nbsp;</td><td>- MacSim uop type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rep_offset</em>&nbsp;</td><td>- repetition offet </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae63f967e03e75fe66268da01b731ac43"></a><!-- doxytag: member="trace_read_c::convert_info_uop" ref="ae63f967e03e75fe66268da01b731ac43" args="(inst_info_s *info, trace_uop_s *trace_uop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::convert_info_uop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinst__info__s.html">inst_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *&nbsp;</td>
          <td class="paramname"> <em>trace_uop</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert instruction information (from hash table) to trace uop </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>- instruction information from the hash table </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_uop</em>&nbsp;</td><td>- MacSim trace format </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae9df5fd9d3fcad53f061f93bfb6c5c7d"></a><!-- doxytag: member="trace_read_c::convert_pinuop_to_t_uop" ref="ae9df5fd9d3fcad53f061f93bfb6c5c7d" args="(trace_info_s *pi, trace_uop_s **trace_uop, int core_id, int sim_thread_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinst__info__s.html">inst_info_s</a> * trace_read_c::convert_pinuop_to_t_uop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrace__info__s.html">trace_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__uop__s.html">trace_uop_s</a> **&nbsp;</td>
          <td class="paramname"> <em>trace_uop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function to decode an instruction from the trace file into a sequence of uops </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pi</em>&nbsp;</td><td>- raw trace format </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_uop</em>&nbsp;</td><td>- micro uops storage for this instruction </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
  </table>
  </dd>
</dl>

<p><p>1. This instruction has a memory load operation</p>
<p>There are two load operations in an instruction. Note that now array index becomes 1</p>
<p>2. Instruction has a memory store operation</p>
<p>3. Instruction has a branch operation</p>
<p>Non-memory, non-branch instruction</p>
<p>Process each static uop to dynamic uop</p>
<p>Hash table already has matching instruction, we can skip above decoding process</p>
<p>Repeat move</p>
</p>

</div>
</div>
<a class="anchor" id="a32c8483c87d146d86ac4f9dc3074e03b"></a><!-- doxytag: member="trace_read_c::convert_t_uop_to_info" ref="a32c8483c87d146d86ac4f9dc3074e03b" args="(trace_uop_s *t_uop, inst_info_s *info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::convert_t_uop_to_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrace__uop__s.html">trace_uop_s</a> *&nbsp;</td>
          <td class="paramname"> <em>t_uop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classinst__info__s.html">inst_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>info</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Convert MacSim trace to instruction information (hash table) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t_uop</em>&nbsp;</td><td>- MacSim trace </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>info</em>&nbsp;</td><td>- instruction information in hash table </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4c8ae23acf255d1fa06b6da7cd67f4ae"></a><!-- doxytag: member="trace_read_c::dprint_inst" ref="a4c8ae23acf255d1fa06b6da7cd67f4ae" args="(trace_info_s *t_info, int core_id, int thread_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::dprint_inst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrace__info__s.html">trace_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>t_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>thread_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dump out instruction information to the file. At most 50000 instructions will be printed </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t_info</em>&nbsp;</td><td>- trace information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>thread_id</em>&nbsp;</td><td>- thread id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a262fb0303f53144c30c267dc3e454c6c"></a><!-- doxytag: member="trace_read_c::get_uops_from_traces" ref="a262fb0303f53144c30c267dc3e454c6c" args="(int core_id, uop_c *uop, int sim_thread_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trace_read_c::get_uops_from_traces </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classuop__c.html">uop_c</a> *&nbsp;</td>
          <td class="paramname"> <em>uop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get an uop from trace Called by frontend.cc </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uop</em>&nbsp;</td><td>- uop object to hold instruction information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>thread id </td></tr>
  </table>
  </dd>
</dl>

<p><p>BOM (beginning of macro) : need to get a next instruction</p>
<p>Trace read failed</p>
<p>Set up actual uop data structure</p>
<p>GPU simulation : handling uncoalesced accesses</p>
</p>

</div>
</div>
<a class="anchor" id="a3a85825f5248721194c5b94535146459"></a><!-- doxytag: member="trace_read_c::init_pin_convert" ref="a3a85825f5248721194c5b94535146459" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::init_pin_convert </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the mapping between trace opcode and uop type </p>

</div>
</div>
<a class="anchor" id="a8f641d8f18e9c7a2be45e500f6f5cec8"></a><!-- doxytag: member="trace_read_c::peek_trace" ref="a8f641d8f18e9c7a2be45e500f6f5cec8" args="(int core_id, trace_info_s *trace_info, int sim_thread_id, bool *inst_read)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trace_read_c::peek_trace </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__info__s.html">trace_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>trace_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>inst_read</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>In case of GPU simulation, from our design, each uncoalcesd accesses will be one trace instruction. To make these accesses in one instruction, we need to read trace file ahead. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_info</em>&nbsp;</td><td>- trace information to store an instruction </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inst_read</em>&nbsp;</td><td>- indicate instruction read successful </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classtrace__read__c.html#a262fb0303f53144c30c267dc3e454c6c">get_uops_from_traces</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a4552577d58bbc847977cdba517a58c10"></a><!-- doxytag: member="trace_read_c::pre_read_trace" ref="a4552577d58bbc847977cdba517a58c10" args="(thread_s *trace_info)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::pre_read_trace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structthread__s.html">thread_s</a> *&nbsp;</td>
          <td class="paramname"> <em>trace_info</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>GPU simulation : Read trace ahead to read synchronization information </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>trace_info</em>&nbsp;</td><td>- trace information </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classprocess__manager__c.html#af6aa8eb4d2257fc6e0f6c054e298fad4">process_manager_c::sim_thread_schedule</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a03c129b83858f7687afb067160fc2f38"></a><!-- doxytag: member="trace_read_c::read_trace" ref="a03c129b83858f7687afb067160fc2f38" args="(int core_id, trace_info_s *trace_info, int sim_thread_id, bool *inst_read)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trace_read_c::read_trace </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtrace__info__s.html">trace_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>trace_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&nbsp;</td>
          <td class="paramname"> <em>inst_read</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trace_info</em>&nbsp;</td><td>- trace information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inst_read</em>&nbsp;</td><td>- set true if instruction read successful </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classtrace__read__c.html#a262fb0303f53144c30c267dc3e454c6c">get_uops_from_traces</a> </dd></dl>

<p><p>First read chunk of instructions, instead of reading one by one, then read from buffer using buffer_index. When all instruction have been read (by checking buffer index), read another chunk, and so on.</p>
<p>When an application is created, only the main thread will be allocated to the trace scheduler. When the main thread is executed in trace_read, allocate all other threads. Each thread can start after certain instruction relative to the main thread (in case of spawned threads).</p>
</p>

</div>
</div>
<a class="anchor" id="ad4b1b2fec74a627bb1d39d40d3a68b80"></a><!-- doxytag: member="trace_read_c::setup_trace" ref="ad4b1b2fec74a627bb1d39d40d3a68b80" args="(int core_id, int sim_thread_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trace_read_c::setup_trace </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called once for each thread/warp when the thread/warp is started. The simulator does read-ahead of the trace file to get next pc address </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classfrontend__c.html#a5de715a12e87c609121b884ebc880a27">frontend_c::process_ifetch</a></dd></dl>
<p>This function is called once for each thread/warp when the thread/warp is started. The simulator does read-ahead of the trace file to get next pc address </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a15c95901d6feaf0a968aad03858eef4c"></a><!-- doxytag: member="trace_read_c::ungetch_trace" ref="a15c95901d6feaf0a968aad03858eef4c" args="(int core_id, int sim_thread_id, int num_inst)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool trace_read_c::ungetch_trace </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sim_thread_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_inst</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>After peeking trace, in case of failture, we need to rewind trace file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_id</em>&nbsp;</td><td>- core id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sim_thread_id</em>&nbsp;</td><td>- thread id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_inst</em>&nbsp;</td><td>- number of instructions to rewind </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classtrace__read__c.html#a8f641d8f18e9c7a2be45e500f6f5cec8">peek_trace</a> </dd></dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a13eedea145a5a0da15a67415d49fb1a0"></a><!-- doxytag: member="trace_read_c::g_mem_type_names" ref="a13eedea145a5a0da15a67415d49fb1a0" args="[20]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * trace_read_c::g_mem_type_names<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  <span class="stringliteral">&quot;NOT_MEM&quot;</span>,     
  <span class="stringliteral">&quot;MEM_LD&quot;</span>,       
  <span class="stringliteral">&quot;MEM_ST&quot;</span>,       
  <span class="stringliteral">&quot;MEM_PF&quot;</span>,       
  <span class="stringliteral">&quot;MEM_WH&quot;</span>,       
  <span class="stringliteral">&quot;MEM_EVICT&quot;</span>,     
  <span class="stringliteral">&quot;MEM_SWPREF_NTA&quot;</span>, 
  <span class="stringliteral">&quot;MEM_SWPREF_T0&quot;</span>,
  <span class="stringliteral">&quot;MEM_SWPREF_T1&quot;</span>,
  <span class="stringliteral">&quot;MEM_SWPREF_T2&quot;</span>,
  <span class="stringliteral">&quot;MEM_LD_LM&quot;</span>,
  <span class="stringliteral">&quot;MEM_LD_SM&quot;</span>,
  <span class="stringliteral">&quot;MEM_LD_GM&quot;</span>,
  <span class="stringliteral">&quot;MEM_ST_LM&quot;</span>,
  <span class="stringliteral">&quot;MEM_ST_SM&quot;</span>,
  <span class="stringliteral">&quot;MEM_ST_GM&quot;</span>,
  <span class="stringliteral">&quot;NUM_MEM_TYPES&quot;</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4d2f34707899a37bf014db6c326ccba"></a><!-- doxytag: member="trace_read_c::g_optype_names" ref="ac4d2f34707899a37bf014db6c326ccba" args="[37]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * trace_read_c::g_optype_names<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  <span class="stringliteral">&quot;OP_INV&quot;</span>,       
  <span class="stringliteral">&quot;OP_SPEC&quot;</span>,      
  <span class="stringliteral">&quot;OP_NOP&quot;</span>,       
  <span class="stringliteral">&quot;OP_CF&quot;</span>,       
  <span class="stringliteral">&quot;OP_CMOV&quot;</span>,      
  <span class="stringliteral">&quot;OP_LDA&quot;</span>,         
  <span class="stringliteral">&quot;OP_IMEM&quot;</span>,      
  <span class="stringliteral">&quot;OP_IADD&quot;</span>,      
  <span class="stringliteral">&quot;OP_IMUL&quot;</span>,      
  <span class="stringliteral">&quot;OP_ICMP&quot;</span>,      
  <span class="stringliteral">&quot;OP_LOGIC&quot;</span>,      
  <span class="stringliteral">&quot;OP_SHIFT&quot;</span>,      
  <span class="stringliteral">&quot;OP_BYTE&quot;</span>,      
  <span class="stringliteral">&quot;OP_MM&quot;</span>,       
  <span class="stringliteral">&quot;OP_FMEM&quot;</span>,      
  <span class="stringliteral">&quot;OP_FCF&quot;</span>,
  <span class="stringliteral">&quot;OP_FCVT&quot;</span>,      
  <span class="stringliteral">&quot;OP_FADD&quot;</span>,      
  <span class="stringliteral">&quot;OP_FMUL&quot;</span>,      
  <span class="stringliteral">&quot;OP_FDIV&quot;</span>,      
  <span class="stringliteral">&quot;OP_FCMP&quot;</span>,      
  <span class="stringliteral">&quot;OP_FBIT&quot;</span>,      
  <span class="stringliteral">&quot;OP_FCMOV&quot;</span>        
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef64643d21fa5c4c5b76f3f2f61fd391"></a><!-- doxytag: member="trace_read_c::g_tr_cf_names" ref="aef64643d21fa5c4c5b76f3f2f61fd391" args="[10]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * trace_read_c::g_tr_cf_names<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  <span class="stringliteral">&quot;NOT_CF&quot;</span>,       
  <span class="stringliteral">&quot;CF_BR&quot;</span>,       
  <span class="stringliteral">&quot;CF_CBR&quot;</span>,       
  <span class="stringliteral">&quot;CF_CALL&quot;</span>,      
  <span class="stringliteral">&quot;CF_IBR&quot;</span>,       
  <span class="stringliteral">&quot;CF_ICALL&quot;</span>,      
  <span class="stringliteral">&quot;CF_ICO&quot;</span>,       
  <span class="stringliteral">&quot;CF_RET&quot;</span>,       
  <span class="stringliteral">&quot;CF_SYS&quot;</span>,
  <span class="stringliteral">&quot;CF_ICBR&quot;</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8853b7e1571b86ffba1ee31b185d0e91"></a><!-- doxytag: member="trace_read_c::k_trace_buffer_size" ref="a8853b7e1571b86ffba1ee31b185d0e91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classtrace__read__c.html#a8853b7e1571b86ffba1ee31b185d0e91">trace_read_c::k_trace_buffer_size</a> = 1000<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>maximum buffer size </p>

</div>
</div>
<a class="anchor" id="a71e9a814021a699d19a3b61fdc53d9f4"></a><!-- doxytag: member="trace_read_c::m_fp_uop_table" ref="a71e9a814021a699d19a3b61fdc53d9f4" args="[TR_OPCODE_LAST]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtrace__read__c.html#a71e9a814021a699d19a3b61fdc53d9f4">trace_read_c::m_fp_uop_table</a>[TR_OPCODE_LAST]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>opcode to uop type mapping tabpe (fp) </p>

</div>
</div>
<a class="anchor" id="a7ca8b07aa548cbeac42c78fa5dcdc856"></a><!-- doxytag: member="trace_read_c::m_int_uop_table" ref="a7ca8b07aa548cbeac42c78fa5dcdc856" args="[TR_OPCODE_LAST]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classtrace__read__c.html#a7ca8b07aa548cbeac42c78fa5dcdc856">trace_read_c::m_int_uop_table</a>[TR_OPCODE_LAST]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>opcode to uop type mapping table (int) </p>

</div>
</div>
<a class="anchor" id="a5056a52a94eb0fc5a3ab6e6ccb1d113b"></a><!-- doxytag: member="trace_read_c::m_simBase" ref="a5056a52a94eb0fc5a3ab6e6ccb1d113b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmacsim__c.html">macsim_c</a>* <a class="el" href="classtrace__read__c.html#a5056a52a94eb0fc5a3ab6e6ccb1d113b">trace_read_c::m_simBase</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="classmacsim__c.html">macsim_c</a> base class for simulation globals </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="trace__read_8h_source.html">trace_read.h</a></li>
<li>trace_read.cc</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Dec 7 2011 23:22:00 for MacSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
