<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MacSim: pref_common.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>pref_common.h</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * File         : pref_common.h</span>
<a name="l00003"></a>00003 <span class="comment"> * Author       : Santhosh Srinath</span>
<a name="l00004"></a>00004 <span class="comment"> * Date         : 11/30/2004</span>
<a name="l00005"></a>00005 <span class="comment"> * CVS          : $Id: pref_common.h,v 1.2 2008/09/12 03:42:01 kacear Exp $:</span>
<a name="l00006"></a>00006 <span class="comment"> * Description  : Common framework for working with prefetchers - less stuff to mess with</span>
<a name="l00007"></a>00007 <span class="comment"> *********************************************************************************************/</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#ifndef PREF_COMMON_H</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define PREF_COMMON_H</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;unordered_map&gt;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;memreq_info.h&quot;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="comment">// There are many deprecated (legacy) functions with the new memory model, although these </span>
<a name="l00022"></a>00022 <span class="comment">// functions are usable. Thereby, these functions will remain for future usage.</span>
<a name="l00023"></a>00023 
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#define PREF_TRACKERS_NUM 16</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#define LOG2_DCACHE_LINE_SIZE log2_int(m_simBase-&gt;m_memory-&gt;line_size(core_id))</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define LOG2_PREF_REGION_SIZE log2_int(*m_simBase-&gt;m_knobs-&gt;KNOB_PREF_REGION_SIZE)</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="keywordtype">int</span>  pref_compare_hwp_priority(<span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> a, <span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> b);
<a name="l00036"></a>00036 <span class="keywordtype">int</span>  pref_compare_prefloadhash(<span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> a, <span class="keyword">const</span> <span class="keywordtype">void</span> * <span class="keyword">const</span> b);
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 
<a name="l00042"></a><a class="code" href="structpref__mem__req__s.html">00042</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structpref__mem__req__s.html" title="Prefetch request data structure.">pref_mem_req_s</a> {
<a name="l00043"></a><a class="code" href="structpref__mem__req__s.html#aa08c0000b0533eac7fbb75054399e236">00043</a>   Addr <a class="code" href="structpref__mem__req__s.html#aa08c0000b0533eac7fbb75054399e236">line_addr</a>;               
<a name="l00044"></a><a class="code" href="structpref__mem__req__s.html#ad208a512a0ad9d988fdf5be679c3fb46">00044</a>   Addr <a class="code" href="structpref__mem__req__s.html#ad208a512a0ad9d988fdf5be679c3fb46">line_index</a>;              
<a name="l00045"></a><a class="code" href="structpref__mem__req__s.html#acfd65621ea0aeda3d983556b62469367">00045</a>   Addr <a class="code" href="structpref__mem__req__s.html#acfd65621ea0aeda3d983556b62469367">loadPC</a>;                  
<a name="l00046"></a><a class="code" href="structpref__mem__req__s.html#a56208adb8dd71d2a86279e86994622cd">00046</a>   uns8 <a class="code" href="structpref__mem__req__s.html#a56208adb8dd71d2a86279e86994622cd">prefetcher_id</a>;           
<a name="l00047"></a><a class="code" href="structpref__mem__req__s.html#a53ee77671e3af46272c4207f8bcce143">00047</a>   <span class="keywordtype">bool</span> <a class="code" href="structpref__mem__req__s.html#a53ee77671e3af46272c4207f8bcce143">valid</a>;                   
<a name="l00048"></a><a class="code" href="structpref__mem__req__s.html#adfb942d07929f0399b15867437d1c481">00048</a>   <span class="keywordtype">int</span>  <a class="code" href="structpref__mem__req__s.html#adfb942d07929f0399b15867437d1c481">core_id</a>;                 
<a name="l00049"></a><a class="code" href="structpref__mem__req__s.html#aab6cdec9cc8bb0c7df38876c9680d01a">00049</a>   <span class="keywordtype">int</span>  <a class="code" href="structpref__mem__req__s.html#aab6cdec9cc8bb0c7df38876c9680d01a">thread_id</a>;               
<a name="l00054"></a><a class="code" href="structpref__mem__req__s.html#a53a42754295d566d82d397585d23595b">00054</a>   <a class="code" href="structpref__mem__req__s.html#a53a42754295d566d82d397585d23595b">pref_mem_req_s</a>() {
<a name="l00055"></a>00055     <a class="code" href="structpref__mem__req__s.html#a53ee77671e3af46272c4207f8bcce143">valid</a> = <span class="keyword">false</span>;
<a name="l00056"></a>00056   }
<a name="l00057"></a>00057 } <a class="code" href="structpref__mem__req__s.html" title="Prefetch request data structure.">pref_mem_req_s</a>;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00063"></a><a class="code" href="structpref__info__s.html">00063</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structpref__info__s.html" title="Hardware prefetcher structure (information, stats).">pref_info_s</a> {
<a name="l00064"></a><a class="code" href="structpref__info__s.html#aa751364dd397a33cd7ffdea42cbda8c0">00064</a>   uns8    <a class="code" href="structpref__info__s.html#aa751364dd397a33cd7ffdea42cbda8c0">id</a>;                   
<a name="l00065"></a><a class="code" href="structpref__info__s.html#a76baaa162c64c556fad1f2f07cc11767">00065</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__info__s.html#a76baaa162c64c556fad1f2f07cc11767">enabled</a>;              
<a name="l00066"></a><a class="code" href="structpref__info__s.html#ad62caa3f68f6e5919b28dc207c46dfab">00066</a>   <span class="keywordtype">int</span>     <a class="code" href="structpref__info__s.html#ad62caa3f68f6e5919b28dc207c46dfab">priority</a>;             
<a name="l00067"></a><a class="code" href="structpref__info__s.html#a9b968c9aebf995d652f9f967eb7e5971">00067</a>   Counter <a class="code" href="structpref__info__s.html#a9b968c9aebf995d652f9f967eb7e5971">useful</a>;               
<a name="l00068"></a><a class="code" href="structpref__info__s.html#a5c781e0f70693480da17b433e11d0132">00068</a>   Counter <a class="code" href="structpref__info__s.html#a5c781e0f70693480da17b433e11d0132">sent</a>;                 
<a name="l00069"></a><a class="code" href="structpref__info__s.html#a2a55ea02b1cd31145a910e43a5ab74c0">00069</a>   Counter <a class="code" href="structpref__info__s.html#a2a55ea02b1cd31145a910e43a5ab74c0">late</a>;                 
<a name="l00070"></a><a class="code" href="structpref__info__s.html#ab196c66d3acfbe4309c4a6cc8fc565d5">00070</a>   Counter <a class="code" href="structpref__info__s.html#ab196c66d3acfbe4309c4a6cc8fc565d5">curr_useful</a>;          
<a name="l00071"></a><a class="code" href="structpref__info__s.html#abc0afd16ea57472bdc0f79079cd3dc40">00071</a>   Counter <a class="code" href="structpref__info__s.html#abc0afd16ea57472bdc0f79079cd3dc40">curr_sent</a>;            
<a name="l00072"></a><a class="code" href="structpref__info__s.html#ad21578ee3356e797bd0ebb5b3e61cbf5">00072</a>   Counter <a class="code" href="structpref__info__s.html#ad21578ee3356e797bd0ebb5b3e61cbf5">curr_late</a>;            
<a name="l00073"></a><a class="code" href="structpref__info__s.html#a82eadd56d553c03fafdc8fa1349ee47d">00073</a>   Counter <a class="code" href="structpref__info__s.html#a82eadd56d553c03fafdc8fa1349ee47d">hybrid_lastuseful</a>;    
<a name="l00074"></a><a class="code" href="structpref__info__s.html#a2e6f9ffea31a7a3dcb4b23d36b857dae">00074</a>   Counter <a class="code" href="structpref__info__s.html#a2e6f9ffea31a7a3dcb4b23d36b857dae">hybrid_lastsent</a>;      
<a name="l00075"></a><a class="code" href="structpref__info__s.html#a98609e4e7376f3fae20054c99feee11a">00075</a>   Addr    <a class="code" href="structpref__info__s.html#a98609e4e7376f3fae20054c99feee11a">trackers</a>[PREF_TRACKERS_NUM]; 
<a name="l00076"></a><a class="code" href="structpref__info__s.html#a3c85c80bea8f5a3acbeb18316d8c912d">00076</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__info__s.html#a3c85c80bea8f5a3acbeb18316d8c912d">trackers_used</a>[PREF_TRACKERS_NUM]; 
<a name="l00077"></a><a class="code" href="structpref__info__s.html#a0c42749d820824d50ada89d498523f29">00077</a>   <span class="keywordtype">int</span>     <a class="code" href="structpref__info__s.html#a0c42749d820824d50ada89d498523f29">track_num</a>; 
<a name="l00078"></a><a class="code" href="structpref__info__s.html#a1151a69f70f1518d9223e15d91479300">00078</a>   Counter <a class="code" href="structpref__info__s.html#a1151a69f70f1518d9223e15d91479300">track_lastsample_cycle</a>; 
<a name="l00079"></a><a class="code" href="structpref__info__s.html#aa709dbfe970425b137e63b8376792392">00079</a>   Counter <a class="code" href="structpref__info__s.html#aa709dbfe970425b137e63b8376792392">trackhist</a>[10][PREF_TRACKERS_NUM]; 
<a name="l00080"></a><a class="code" href="structpref__info__s.html#a84a8db7783a6a9ae781fc5e5ee66b9da">00080</a>   Counter <a class="code" href="structpref__info__s.html#a84a8db7783a6a9ae781fc5e5ee66b9da">prefhit_count</a>;        
<a name="l00081"></a><a class="code" href="structpref__info__s.html#a99fd5a2733a16f8e4c89a91a87d219da">00081</a>   uns     <a class="code" href="structpref__info__s.html#a99fd5a2733a16f8e4c89a91a87d219da">dyn_degree</a>;           
<a name="l00082"></a>00082 } <a class="code" href="structpref__info__s.html" title="Hardware prefetcher structure (information, stats).">pref_info_s</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00088"></a>00088 <span class="keyword">typedef</span> <span class="keyword">enum</span> HWP_Type_Enum {
<a name="l00089"></a>00089   Mem_To_UL1,
<a name="l00090"></a>00090   UL1_To_DL0,
<a name="l00091"></a>00091 } HWP_Type;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00097"></a>00097 <span class="keyword">typedef</span> <span class="keyword">enum</span> HWP_DynAggr_Enum {
<a name="l00098"></a>00098   AGGR_DEC,
<a name="l00099"></a>00099   AGGR_STAY,
<a name="l00100"></a>00100   AGGR_INC,
<a name="l00101"></a>00101 } HWP_DynAggr;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00107"></a>00107 <span class="keyword">typedef</span> <span class="keyword">enum</span> HWP_Region_LineUseStatus_Enum {
<a name="l00108"></a>00108   HWP_UL1_MISS,           <span class="comment">// Data came in due to a load miss</span>
<a name="l00109"></a>00109   HWP_UL1_PREF_UNUSED,    <span class="comment">// Data came in due to a prefetch - went unused</span>
<a name="l00110"></a>00110   HWP_UL1_PREF_USED       <span class="comment">// Data came in due to a prefetch - was used</span>
<a name="l00111"></a>00111 } HWP_Region_LineUseStatus;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 
<a name="l00117"></a><a class="code" href="structpref__region__line__status__s.html">00117</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structpref__region__line__status__s.html" title="Prefetch region line status information.">pref_region_line_status_s</a> {
<a name="l00118"></a><a class="code" href="structpref__region__line__status__s.html#a3a792d0fa5a569885b3140dc6e7bb4cf">00118</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__line__status__s.html#a3a792d0fa5a569885b3140dc6e7bb4cf">l2_hit</a>;      
<a name="l00119"></a><a class="code" href="structpref__region__line__status__s.html#a966e10800fabfe683412b2ad249d2308">00119</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__line__status__s.html#a966e10800fabfe683412b2ad249d2308">l2_miss</a>;     
<a name="l00120"></a><a class="code" href="structpref__region__line__status__s.html#acc76237bba89f651fb6b24ae943be2bd">00120</a>   uns16   <a class="code" href="structpref__region__line__status__s.html#acc76237bba89f651fb6b24ae943be2bd">pref_sent</a>;    
<a name="l00121"></a><a class="code" href="structpref__region__line__status__s.html#ae765928b442bb6d0bad36a21bdecb7fb">00121</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__line__status__s.html#ae765928b442bb6d0bad36a21bdecb7fb">l2_evict</a>;    
<a name="l00122"></a><a class="code" href="structpref__region__line__status__s.html#aaf238eaba3fec92c5e4a1a4e6e25c1e7">00122</a>   Counter <a class="code" href="structpref__region__line__status__s.html#aaf238eaba3fec92c5e4a1a4e6e25c1e7">cycle_evict</a>;  
<a name="l00123"></a><a class="code" href="structpref__region__line__status__s.html#ac2e89200cbe091e9f64362565759c169">00123</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__line__status__s.html#ac2e89200cbe091e9f64362565759c169">evict_onPF</a>;   
<a name="l00128"></a><a class="code" href="structpref__region__line__status__s.html#ae0ed1111dee24577d3510f11fdfe5493">00128</a>   <a class="code" href="structpref__region__line__status__s.html#ae0ed1111dee24577d3510f11fdfe5493">pref_region_line_status_s</a>() {
<a name="l00129"></a>00129     <a class="code" href="structpref__region__line__status__s.html#a3a792d0fa5a569885b3140dc6e7bb4cf">l2_hit</a>      = <span class="keyword">false</span>;
<a name="l00130"></a>00130     <a class="code" href="structpref__region__line__status__s.html#a966e10800fabfe683412b2ad249d2308">l2_miss</a>     = <span class="keyword">false</span>;
<a name="l00131"></a>00131     <a class="code" href="structpref__region__line__status__s.html#acc76237bba89f651fb6b24ae943be2bd">pref_sent</a>   = 0;
<a name="l00132"></a>00132     <a class="code" href="structpref__region__line__status__s.html#ae765928b442bb6d0bad36a21bdecb7fb">l2_evict</a>    = <span class="keyword">false</span>;
<a name="l00133"></a>00133     <a class="code" href="structpref__region__line__status__s.html#aaf238eaba3fec92c5e4a1a4e6e25c1e7">cycle_evict</a> = 0;
<a name="l00134"></a>00134     <a class="code" href="structpref__region__line__status__s.html#ac2e89200cbe091e9f64362565759c169">evict_onPF</a>  = <span class="keyword">false</span>;
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136 } <a class="code" href="structpref__region__line__status__s.html" title="Prefetch region line status information.">pref_region_line_status_s</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00142"></a><a class="code" href="structpref__region__info__s.html">00142</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structpref__region__info__s.html" title="Prefetch region information.">pref_region_info_s</a> {
<a name="l00143"></a><a class="code" href="structpref__region__info__s.html#a2365e6799e297f0107b7e9abd34eca8b">00143</a>   Addr    <a class="code" href="structpref__region__info__s.html#a2365e6799e297f0107b7e9abd34eca8b">region_id</a>; 
<a name="l00144"></a><a class="code" href="structpref__region__info__s.html#a00cfcb04472cf7cf9c0beb50cac2a7b7">00144</a>   Counter <a class="code" href="structpref__region__info__s.html#a00cfcb04472cf7cf9c0beb50cac2a7b7">last_access</a>; 
<a name="l00145"></a><a class="code" href="structpref__region__info__s.html#af5c8211c6d31be803eeab677457cb6df">00145</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__info__s.html#af5c8211c6d31be803eeab677457cb6df">valid</a>; 
<a name="l00146"></a><a class="code" href="structpref__region__info__s.html#a64ae1850a186f1cabe54fb98a14716d0">00146</a>   <span class="keywordtype">bool</span>    <a class="code" href="structpref__region__info__s.html#a64ae1850a186f1cabe54fb98a14716d0">trained</a>; 
<a name="l00147"></a><a class="code" href="structpref__region__info__s.html#a7418a9a12dbe0cc8a6c87d2ee87b171d">00147</a>   uns8    <a class="code" href="structpref__region__info__s.html#a7418a9a12dbe0cc8a6c87d2ee87b171d">pref_id</a>; 
<a name="l00148"></a><a class="code" href="structpref__region__info__s.html#ab3d02274c3da7cee73baf6d9b453ca89">00148</a>   <a class="code" href="structpref__region__line__status__s.html" title="Prefetch region line status information.">pref_region_line_status_s</a>* <a class="code" href="structpref__region__info__s.html#ab3d02274c3da7cee73baf6d9b453ca89">status</a>; 
<a name="l00153"></a><a class="code" href="structpref__region__info__s.html#abe4302c4dc36644139f1931f8ae60d7a">00153</a>   <a class="code" href="structpref__region__info__s.html#abe4302c4dc36644139f1931f8ae60d7a">pref_region_info_s</a>() {
<a name="l00154"></a>00154     <a class="code" href="structpref__region__info__s.html#af5c8211c6d31be803eeab677457cb6df">valid</a> = <span class="keyword">false</span>;
<a name="l00155"></a>00155   }
<a name="l00156"></a>00156 } <a class="code" href="structpref__region__info__s.html" title="Prefetch region information.">pref_region_info_s</a>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00162"></a><a class="code" href="classhwp__common__c.html">00162</a> <span class="keyword">class </span><a class="code" href="classhwp__common__c.html" title="Hardware prefetcher wrapper class.">hwp_common_c</a> 
<a name="l00163"></a>00163 {
<a name="l00164"></a>00164   <span class="keyword">public</span>:
<a name="l00168"></a>00168     <a class="code" href="classhwp__common__c.html#a847af22e1e6b5cd521682e222931e215">hwp_common_c</a>(<span class="keywordtype">int</span> cid, Unit_Type type, <a class="code" href="classmacsim__c.html">macsim_c</a>* simBase);
<a name="l00169"></a>00169 
<a name="l00173"></a>00173     <a class="code" href="classhwp__common__c.html#ae8646bcfac93ad04e980bbafc23bf8cd">~hwp_common_c</a>();
<a name="l00174"></a>00174 
<a name="l00178"></a>00178     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a45f9544bf7c9ef26d7838bfae1b05616">pref_addto_l1req_queue</a>(Addr line_index, uns8 prefetcher_id );
<a name="l00179"></a>00179 
<a name="l00183"></a>00183     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a9f4d085287cf2fbf8c21f416d9a1b3eb">pref_addto_l2req_queue</a>(Addr line_index, uns8 prefetcher_id );
<a name="l00184"></a>00184 
<a name="l00188"></a>00188     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a9f4d085287cf2fbf8c21f416d9a1b3eb">pref_addto_l2req_queue</a>(Addr line_index, uns8 prefetcher_id, Addr loadAddr );
<a name="l00189"></a>00189 
<a name="l00193"></a>00193     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a9f4d085287cf2fbf8c21f416d9a1b3eb">pref_addto_l2req_queue</a>(Addr line_index, uns8 prefetcher_id, Addr loadAddr, <span class="keywordtype">int</span> tid);
<a name="l00194"></a>00194 
<a name="l00198"></a>00198     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#af9bf1e4d7f6cbb02bcdadc99dda4ca6f">pref_addto_l2req_queue_set</a>(Addr line_index, uns8 prefetcher_id, <span class="keywordtype">bool</span> Begin, \
<a name="l00199"></a>00199         <span class="keywordtype">bool</span> End, Addr loadAddr);
<a name="l00200"></a>00200 
<a name="l00204"></a>00204     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#af9bf1e4d7f6cbb02bcdadc99dda4ca6f">pref_addto_l2req_queue_set</a>(Addr line_index, uns8 prefetcher_id, <span class="keywordtype">bool</span> Begin, \
<a name="l00205"></a>00205         <span class="keywordtype">bool</span> End, Addr loadAddr, <span class="keywordtype">int</span> tid);
<a name="l00206"></a>00206 
<a name="l00210"></a>00210     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a957c2371bab5f43e1718b31a044c93f5">train</a>(<span class="keywordtype">int</span> level, <span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a>* uop, <span class="keywordtype">bool</span> hit);
<a name="l00211"></a>00211 
<a name="l00215"></a>00215     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a37a047d6ec507e7196af2ec0d56f2f1c">pref_init</a>(<span class="keywordtype">bool</span> ptx);
<a name="l00216"></a>00216 
<a name="l00220"></a>00220     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#ae36402703dbe7309b0c67c383aede723">pref_done</a>(<span class="keywordtype">void</span>);
<a name="l00221"></a>00221 
<a name="l00225"></a>00225     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#aa85c61c7a62418fb25a23036abff4bbf">pref_l1_miss</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00226"></a>00226 
<a name="l00230"></a>00230     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#ad74dc778458b548c715c9da8b5e0ca1b">pref_l1_hit</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00231"></a>00231 
<a name="l00235"></a>00235     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a4b53b2fc3c651fd8bba14bc63ff93770">pref_l1_pref_hit</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, uns8 prefetcher_id, \
<a name="l00236"></a>00236         <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00237"></a>00237 
<a name="l00241"></a>00241     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a6dd7ab394a5eb5916addef4051d0fc50">pref_l2_miss</a>(<a class="code" href="structmem__req__s.html" title="memory request data structure">mem_req_s</a> *req);
<a name="l00242"></a>00242 
<a name="l00246"></a>00246     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a6dd7ab394a5eb5916addef4051d0fc50">pref_l2_miss</a>(<span class="keywordtype">int</span> tid, Addr line_addr, <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a>* uop);
<a name="l00247"></a>00247 
<a name="l00251"></a>00251     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#af321b93d2f9915e2de6edeff08e7258a">pref_l2_hit</a> (<a class="code" href="structmem__req__s.html" title="memory request data structure">mem_req_s</a> *req);
<a name="l00252"></a>00252 
<a name="l00256"></a>00256     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#af321b93d2f9915e2de6edeff08e7258a">pref_l2_hit</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00257"></a>00257 
<a name="l00261"></a>00261     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#aa1a2849ec0b7ab08625ec4a7bf2d235a">pref_l2_pref_hit</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, uns8 prefetcher_id, 
<a name="l00262"></a>00262         <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00263"></a>00263 
<a name="l00268"></a>00268     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a8ac359d52de4f5288fdae0d6ab960284">pref_l2_pref_hit_late</a>(<span class="keywordtype">int</span> tid, Addr line_addr, Addr load_PC, uns8 prefetcher_id, \
<a name="l00269"></a>00269         <a class="code" href="classuop__c.html" title="Micro-Op (uop) class.">uop_c</a> *uop);
<a name="l00270"></a>00270 
<a name="l00274"></a>00274     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a5f78b740698b02cb175594f9c1112f73">pref_update_queues</a>(<span class="keywordtype">void</span>);
<a name="l00275"></a>00275 
<a name="l00279"></a>00279     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#a0016b8b26679fbe491b67b0f016296d2">pref_get_regionbased_acc</a>(<span class="keywordtype">void</span>);
<a name="l00280"></a>00280 
<a name="l00284"></a>00284     <span class="keywordtype">void</span>  <a class="code" href="classhwp__common__c.html#a6e2d87705fd706550b8208305601cb8c">pref_update_regioninfo</a>(Addr line_addr, <span class="keywordtype">bool</span> l2_hit, <span class="keywordtype">bool</span> l2_miss, <span class="keywordtype">bool</span> evict_onPF, 
<a name="l00285"></a>00285         Counter cycle_evict, uns8 prefetcher_id);
<a name="l00286"></a>00286     
<a name="l00291"></a>00291     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#a2bd5114855db1eb4cba1d1a810106ec6">pref_matchregion</a>(Addr reg_id, <span class="keywordtype">bool</span>);
<a name="l00292"></a>00292     
<a name="l00296"></a>00296     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#a2ee8cd5692a1a56cc823e6b3cd638951">pref_get_l2pollution</a>(<span class="keywordtype">void</span>);
<a name="l00297"></a>00297     
<a name="l00301"></a>00301     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#ab005210e7c29917252eec3ae1fa124e5">pref_get_overallaccuracy</a>(HWP_Type);
<a name="l00302"></a>00302 
<a name="l00307"></a>00307     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#a2162083052af8a3c87f7581255e4b5c4">pref_get_accuracy</a>(uns8 prefetcher_id);
<a name="l00308"></a>00308 
<a name="l00313"></a>00313     HWP_DynAggr <a class="code" href="classhwp__common__c.html#a7f9662d82053ff6903468027a52cc90e">pref_get_degfb</a>(uns8 prefetcher_id);
<a name="l00314"></a>00314 
<a name="l00318"></a>00318     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#af7811d5a01ac7871befa7981524b0362">pref_get_timeliness</a>(uns8 prefetcher_id);
<a name="l00319"></a>00319 
<a name="l00323"></a>00323     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#af78a30a5e602bdb2cce4aa12a73ff03a">pref_hybrid_makeselection</a>(<span class="keywordtype">int</span> reg_idx);
<a name="l00324"></a>00324 
<a name="l00328"></a>00328     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#a1425babdd9b5225b6ceadd8ded18a7fd">pref_acc_useupdate</a>(Addr line_addr);
<a name="l00329"></a>00329 
<a name="l00333"></a>00333     <span class="keywordtype">char</span>* <a class="code" href="classhwp__common__c.html#aa1c7c36423043a58393954abde7e2e1f">pref_polbv_access</a>(Addr lineIndex);
<a name="l00334"></a>00334 
<a name="l00338"></a>00338     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#ab8f1300e4f7d754ae3af951fd563d5e8">pref_evictline_notused</a>(Addr);
<a name="l00339"></a>00339 
<a name="l00343"></a>00343     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#aaf17cdc460f813ac8a0318289236a685">pref_l2evict</a>(Addr addr);
<a name="l00344"></a>00344 
<a name="l00348"></a>00348     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#ab7a365d3a9305263428cef111abdb41b">pref_l2evictOnPF</a>(Addr addr);
<a name="l00349"></a>00349     
<a name="l00353"></a>00353     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#ab07a16a59c39a0e33575b2de65070441">pref_l1req_queue_filter</a>(Addr line_addr);
<a name="l00354"></a>00354 
<a name="l00358"></a>00358     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a9f3a3c01f553a29e3f2a29efd71c585c">pref_l2req_queue_filter</a>(Addr line_addr);
<a name="l00359"></a>00359     
<a name="l00363"></a>00363     <span class="keywordtype">void</span> <a class="code" href="classhwp__common__c.html#afdb7761f89fe3c01feb90dbb88c0573b">pref_l2sent</a>(uns8 prefetcher_id);
<a name="l00364"></a>00364     
<a name="l00368"></a>00368     <span class="keywordtype">float</span> <a class="code" href="classhwp__common__c.html#afe333d0c12e7e5ccb341ec3cd5bb3c46">pref_get_replaccuracy</a>(uns8 prefetcher_id);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   <span class="keyword">public</span>:
<a name="l00371"></a><a class="code" href="classhwp__common__c.html#aaad4b27dd21568522b666a86f953a6f3">00371</a>     vector&lt;pref_base_c *&gt; <a class="code" href="classhwp__common__c.html#aaad4b27dd21568522b666a86f953a6f3">pref_table</a>; 
<a name="l00373"></a>00373   <span class="keyword">private</span>:
<a name="l00377"></a>00377     <a class="code" href="classhwp__common__c.html#a847af22e1e6b5cd521682e222931e215">hwp_common_c</a>();
<a name="l00378"></a>00378 
<a name="l00379"></a>00379   <span class="keyword">private</span>:
<a name="l00380"></a><a class="code" href="classhwp__common__c.html#afe4085ac88e7260e21e8ef746ad037ea">00380</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#afe4085ac88e7260e21e8ef746ad037ea">core_id</a>; 
<a name="l00381"></a><a class="code" href="classhwp__common__c.html#a7feb683e634fd5c3687b7373a9765be0">00381</a>     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#a7feb683e634fd5c3687b7373a9765be0">knob_ptx_sim</a>; 
<a name="l00382"></a><a class="code" href="classhwp__common__c.html#ad38f322721c4ef2c6d2780966c726b03">00382</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#ad38f322721c4ef2c6d2780966c726b03">m_shift_bit</a>; 
<a name="l00383"></a><a class="code" href="classhwp__common__c.html#abf0978a3089ddcee91a153cd2bb547bc">00383</a>     <span class="keywordtype">bool</span> <a class="code" href="classhwp__common__c.html#abf0978a3089ddcee91a153cd2bb547bc">m_update_acc</a>; 
<a name="l00385"></a><a class="code" href="classhwp__common__c.html#a77746bacd00943b3f0b05c01cab47c08">00385</a>     <a class="code" href="structpref__mem__req__s.html" title="Prefetch request data structure.">pref_mem_req_s</a>* <a class="code" href="classhwp__common__c.html#a77746bacd00943b3f0b05c01cab47c08">m_l1req_queue</a>; 
<a name="l00386"></a><a class="code" href="classhwp__common__c.html#ade1174fd9f09001b7805398b7f18c03b">00386</a>     <a class="code" href="structpref__mem__req__s.html" title="Prefetch request data structure.">pref_mem_req_s</a>* <a class="code" href="classhwp__common__c.html#ade1174fd9f09001b7805398b7f18c03b">m_l2req_queue</a>; 
<a name="l00388"></a><a class="code" href="classhwp__common__c.html#a4ff579785f41d6cd50b9f7d3dfb53eda">00388</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#a4ff579785f41d6cd50b9f7d3dfb53eda">m_l1req_queue_req_pos</a>; 
<a name="l00389"></a><a class="code" href="classhwp__common__c.html#a8a2d2e563385b7af4694888f96902bdc">00389</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#a8a2d2e563385b7af4694888f96902bdc">m_l1req_queue_send_pos</a>; 
<a name="l00390"></a><a class="code" href="classhwp__common__c.html#a255f0b4bdf74ba9042cdae97f7b43965">00390</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#a255f0b4bdf74ba9042cdae97f7b43965">m_l2req_queue_req_pos</a>; 
<a name="l00391"></a><a class="code" href="classhwp__common__c.html#ac0fae9f4b6721765278811d618eb9629">00391</a>     <span class="keywordtype">int</span> <a class="code" href="classhwp__common__c.html#ac0fae9f4b6721765278811d618eb9629">m_l2req_queue_send_pos</a>; 
<a name="l00393"></a>00393     <span class="comment">// Accuracy Throttling Studies</span>
<a name="l00394"></a><a class="code" href="classhwp__common__c.html#af23abcaf04aa6842a3a083d085ee1c37">00394</a>     Counter <a class="code" href="classhwp__common__c.html#af23abcaf04aa6842a3a083d085ee1c37">m_overall_l1useful</a>; 
<a name="l00395"></a><a class="code" href="classhwp__common__c.html#a3339e0c2bdd7d61b8149690b266e4756">00395</a>     Counter <a class="code" href="classhwp__common__c.html#a3339e0c2bdd7d61b8149690b266e4756">m_overall_l1sent</a>; 
<a name="l00396"></a><a class="code" href="classhwp__common__c.html#a54101466f7f886b6650aef05b6e4bcd3">00396</a>     Counter <a class="code" href="classhwp__common__c.html#a54101466f7f886b6650aef05b6e4bcd3">m_overall_l2useful</a>; 
<a name="l00397"></a><a class="code" href="classhwp__common__c.html#ab819b7205b88fe7311e2b95667cd2410">00397</a>     Counter <a class="code" href="classhwp__common__c.html#ab819b7205b88fe7311e2b95667cd2410">m_overall_l2sent</a>; 
<a name="l00398"></a><a class="code" href="classhwp__common__c.html#aba0eb14ce388c2843221e3f642a580f6">00398</a>     Counter <a class="code" href="classhwp__common__c.html#aba0eb14ce388c2843221e3f642a580f6">m_num_uselesspref_evict</a>; 
<a name="l00399"></a><a class="code" href="classhwp__common__c.html#ac6a0c9f2b85988328933352cae406531">00399</a>     Counter <a class="code" href="classhwp__common__c.html#ac6a0c9f2b85988328933352cae406531">m_num_l2_evicts</a>; 
<a name="l00401"></a>00401     <span class="comment">// stats</span>
<a name="l00402"></a><a class="code" href="classhwp__common__c.html#a0f572e4a38d137dcd255b8f822cd2250">00402</a>     <a class="code" href="structpref__region__info__s.html" title="Prefetch region information.">pref_region_info_s</a> *<a class="code" href="classhwp__common__c.html#a0f572e4a38d137dcd255b8f822cd2250">region_info</a>; 
<a name="l00403"></a><a class="code" href="classhwp__common__c.html#a57e9422811b855c6de9a041c1f7d3045">00403</a>     Counter <a class="code" href="classhwp__common__c.html#a57e9422811b855c6de9a041c1f7d3045">m_l2_misses</a>; 
<a name="l00404"></a><a class="code" href="classhwp__common__c.html#a0774007b330ea6bcb63f27e0bb189b66">00404</a>     Counter <a class="code" href="classhwp__common__c.html#a0774007b330ea6bcb63f27e0bb189b66">m_curr_l2_misses</a>; 
<a name="l00405"></a><a class="code" href="classhwp__common__c.html#abbf386422494c8ae2e60c1d2cafd5c04">00405</a>     Counter <a class="code" href="classhwp__common__c.html#abbf386422494c8ae2e60c1d2cafd5c04">m_pfpol</a>; 
<a name="l00406"></a><a class="code" href="classhwp__common__c.html#ac018f13a00b71a4d7570403f3c27c732">00406</a>     Counter <a class="code" href="classhwp__common__c.html#ac018f13a00b71a4d7570403f3c27c732">m_curr_pfpol</a>; 
<a name="l00407"></a><a class="code" href="classhwp__common__c.html#ad6cc891ec48a9d169da339e4c234a780">00407</a>     Counter <a class="code" href="classhwp__common__c.html#ad6cc891ec48a9d169da339e4c234a780">m_useful</a>;  
<a name="l00408"></a><a class="code" href="classhwp__common__c.html#aadcc7e3de1eb3714564ab09503891baf">00408</a>     Counter <a class="code" href="classhwp__common__c.html#aadcc7e3de1eb3714564ab09503891baf">m_region_sent</a>; 
<a name="l00409"></a><a class="code" href="classhwp__common__c.html#ab2549a1bf12d013b25728e3424120bf3">00409</a>     Counter <a class="code" href="classhwp__common__c.html#ab2549a1bf12d013b25728e3424120bf3">m_region_useful</a>; 
<a name="l00410"></a><a class="code" href="classhwp__common__c.html#a0bcd28288b55a82b3d7ed606482e6343">00410</a>     Counter <a class="code" href="classhwp__common__c.html#a0bcd28288b55a82b3d7ed606482e6343">m_curr_region_sent</a>; 
<a name="l00411"></a><a class="code" href="classhwp__common__c.html#a8cafbef3d36489af200e76b1e9c5b761">00411</a>     Counter <a class="code" href="classhwp__common__c.html#a8cafbef3d36489af200e76b1e9c5b761">m_curr_region_useful</a>; 
<a name="l00412"></a><a class="code" href="classhwp__common__c.html#a6e07cfc36d0a0f955a347608acf7681c">00412</a>     uns <a class="code" href="classhwp__common__c.html#a6e07cfc36d0a0f955a347608acf7681c">m_phase</a>; 
<a name="l00413"></a><a class="code" href="classhwp__common__c.html#a391080d4f8aa02cba02bd177b0538ab3">00413</a>     <span class="keywordtype">char</span>* <a class="code" href="classhwp__common__c.html#a391080d4f8aa02cba02bd177b0538ab3">m_polbv_info</a>; 
<a name="l00415"></a>00415     <span class="comment">// for hybrid prefetching</span>
<a name="l00416"></a><a class="code" href="classhwp__common__c.html#a89f3976f4e8523d23045431ad4e02569">00416</a>     uns8 <a class="code" href="classhwp__common__c.html#a89f3976f4e8523d23045431ad4e02569">m_default_prefetcher</a>; 
<a name="l00417"></a><a class="code" href="classhwp__common__c.html#a0b833904c9a0040d1a2c7b257a2864da">00417</a>     Counter <a class="code" href="classhwp__common__c.html#a0b833904c9a0040d1a2c7b257a2864da">m_last_update_time</a>; 
<a name="l00419"></a><a class="code" href="classhwp__common__c.html#ad87e4460ed484fc1657efb73917913c7">00419</a>     unordered_map&lt;int, Counter&gt; <a class="code" href="classhwp__common__c.html#ad87e4460ed484fc1657efb73917913c7">m_last_inst_num</a>; 
<a name="l00421"></a>00421     FILE * PREF_TRACE_OUT;
<a name="l00422"></a>00422     FILE * PREF_ACC_OUT;
<a name="l00423"></a>00423     FILE * PREF_DEGFB_FILE;
<a name="l00424"></a>00424 
<a name="l00425"></a><a class="code" href="classhwp__common__c.html#aea3fc85931e5d425eb8c7a60f39aa7fe">00425</a>     <a class="code" href="classmacsim__c.html">macsim_c</a>* <a class="code" href="classhwp__common__c.html#aea3fc85931e5d425eb8c7a60f39aa7fe">m_simBase</a>;         
<a name="l00427"></a>00427 };
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="preprocessor">#endif </span><span class="comment">/*  __PREF_COMMON_H__*/</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Dec 7 2011 23:21:52 for MacSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
